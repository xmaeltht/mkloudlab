# Grafana Tempo Helm values tuned for single-cluster production-like usage

tempo:
  server:
    logLevel: info
  storage:
    trace:
      backend: filesystem
      filesystem:
        directory: /var/tempo/traces
    wal:
      enabled: true
  auth_enabled: false

ingester:
  replicas: 1
  persistence:
    enabled: true
    size: 20Gi
    storageClassName: local-path

compactor:
  persistence:
    enabled: true
    size: 10Gi
    storageClassName: local-path

queryFrontend:
  replicas: 1

querier:
  replicas: 1

metricsGenerator:
  enabled: true
  config:
    storage:
      path: /var/tempo/generator/wal
      remote_write:
        - url: http://prometheus-server.observability.svc.cluster.local:80/api/v1/write
          send_exemplars: true
    registry:
      collection_interval: 15s
    processor:
      service_graphs:
        histogram_buckets: [0.1, 0.2, 0.4, 0.8, 1.6, 3.2, 6.4, 12.8]
        dimensions:
          - http.method
          - http.target
          - http.status_code
      span_metrics:
        histogram_buckets: [0.002, 0.004, 0.008, 0.016, 0.032, 0.064, 0.128, 0.256, 0.512, 1.02, 2.05, 4.10]

tempoGateway:
  enabled: false

serviceMonitor:
  enabled: true

traces:
  jaeger:
    thriftHttp:
      enabled: false
  zipkin:
    enabled: false
  otlp:
    grpc:
      enabled: true
      receiverProtocol: grpc
      listenAddress: 0.0.0.0
    http:
      enabled: true
      listenAddress: 0.0.0.0

resources:
  limits:
    cpu: 1000m
    memory: 2Gi
  requests:
    cpu: 500m
    memory: 1Gi
